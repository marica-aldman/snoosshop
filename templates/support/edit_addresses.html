{% extends "base.html" %}

{% block content %}


<main>

    {% if gdpr_check %}
      {% include "gdpr_popup.html" %}
    {% endif %}
    <div class="container">
    <div>
        <form method="POST" action="{% url 'support:specific_user' %}">
            {% csrf_token %}
            <div>
                <div>
                    <button type="submit" class='btn btn-primary' name="lookAt" value="{{person.id}}">
                        Tillbaka
                    </button>
                </div>
            </div>
        </form>
    </div>
    <!--profile-->
        <div class="border rounded mb-3 p-2">
        <h3>
            Kundens addresser:
        </h3>
                    {% comment %}
                         addresses
                    {% endcomment %}
        <div>
            <form method="POST" action="{% url 'support:new_address' %}">
                {% csrf_token %}
                <input type="hidden" name="theClient" value="{{ person.id }}">
                <button type="submit" class="btn btn-primary float-right">
                    Lägg till ny
                </button>
            </form>
        </div>

        <table class="table-striped table-hover w-100  mb-2 table-bordered">
            <thead class="mdb-color lighten-5">
                <tr>
                    <th class="p-1">
                        Address id
                    </th>
                    <th class="p-1">
                        Gatuaddress
                    </th>
                    <th class="p-1">
                        Typ
                    </th>
                    <th class="p-1">
                        Huvudsaklig
                    </th>
                    <th class="p-1">
                        &nbsp;
                    </th>
                    <th class="p-1">
                        &nbsp;
                    </th>
                </tr>
            </thead>
            <tbody>
            {% for address in  addresses %}
                <tr>
                    <td class="mdb-color lighten-5 pl-1">
                        {{  address.id }}
                    </td>
                    <td>
                        {{  address.street_address }}
                    </td>
                    <td>
                        {% if address.address_type == "S"%}
                            Leverans address
                        {% else %}
                            Faktura address
                        {% endif %}
                    </td>
                    <td class="pl-1">
                        {% if address.default %}
                            Ja
                        {% else %}
                            Nej
                        {% endif %}
                    </td>
                    <td>
                        <form method="POST" action="{{address.support_get_absolute_url}}">
                        {% csrf_token %}
                            <input type="hidden" name="theClient" value="{{ person.id }}">
                            <button class="btn btn-primary float-right">
                                Ändra/Titta på
                            </button>
                        </form>
                    </td>
                    <td>
                        <form method="POST" action="." onSubmit="return confirm('{{onsubmit}}');">
                            {% csrf_token %}
                            <input type="hidden" name="delete" value='yes'>
                            <input type="hidden" name="id" value={{address.id}}>
                            <input type="hidden" name="u_id" value={{person.id}}>
                            <button type="submit" class="btn btn-primary float-right">
                                Ta bort
                            </button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        <div class="d-flex w-100 justify-content-around">
            <ul class="pagination">
                {% if previous_page %}
                <li class="page-item">
                    <form method="POST" action="{% url 'support:edit_addresses' %}">
                    {% csrf_token %}
                        <input type="hidden" value="pagination" name="paging">
                        <input type="hidden" value="{{current_page}}" name="current_page">
                        <input type="hidden" name="search" value="{{search_value}}">
                        <input type="hidden" name="person" value="{{person.id}}">
                        <button type="submit" value="True" name="previousPage" class="page-link">
                            &laquo;
                        </button>
                    </form>
                </li>
                {% endif %}
                {% if start %}
                <li>
                    <form method="POST" action="{% url 'support:edit_addresses' %}">
                    {% csrf_token %}
                        <input type="hidden" value="pagination" name="paging">
                        <input type="hidden" value="{{current_page}}" name="current_page">
                        <input type="hidden" name="search" value="{{search_value}}">
                        <input type="hidden" name="person" value="{{person.id}}">
                        <button type="submit" value="1" name="page" class="page-link" style="color: black; border: 0; display:inline-block">
                            1
                        </button>
                        <button type="submit" value="False" name="..." class="page-link" style="color: black; border: 0; display:inline-block" disabled>
                            ...
                        </button>
                    </form>
                </li>
                {% endif %}
                {% if current_page == 4 %}
                    <form method="POST" action="{% url 'support:edit_addresses' %}">
                    {% csrf_token %}
                        <input type="hidden" value="pagination" name="paging">
                        <input type="hidden" value="{{current_page}}" name="current_page">
                        <input type="hidden" name="search" value="{{search_value}}">
                        <input type="hidden" name="person" value="{{person.id}}">
                        <button type="submit" value="1" name="page" class="page-link" style="color: black; border: 0">
                            1
                        </button>
                    </form>
                {% endif %}
                {% for address in more_addresses %}
                {%if current_page == address %}
                <li class="page-item active">
                {% else %}
                <li class="page-item">
                {% endif %}
                    <form method="POST" action="{% url 'support:edit_addresses' %}">
                    {% csrf_token %}
                        <input type="hidden" value="pagination" name="paging">
                        <input type="hidden" value="{{current_page}}" name="current_page">
                        <input type="hidden" name="search" value="{{search_type}}">
                        <input type="hidden" name="person" value="{{person.id}}">
                        <button type="submit" value="{{ address }}" name="page" {% if current_page == address %}class="page-link disabled" disabled{% else %} class="page-link"{% endif %}>
                            {{address}}<span class="sr-only">(current)</span>
                        </button>
                    </form>
                </li>
                {% endfor %}
                {% if end %}
                <li>
                    <form method="POST" action="{% url 'support:edit_addresses' %}">
                    {% csrf_token %}
                        <input type="hidden" value="pagination" name="paging">
                        <input type="hidden" value="{{current_page}}" name="current_page">
                        <input type="hidden" name="search" value="{{search_value}}">
                        <input type="hidden" name="person" value="{{person.id}}">
                        <button type="submit" value="False" name="..." class="page-link" style="color: black; border: 0; display:inline-block" disabled>
                            ...
                        </button>
                        <button type="submit" value="{{max}}" name="page" class="page-link" style="color: black; border: 0; display:inline-block">
                            {{max}}
                        </button>
                    </form>
                </li>
                {% endif %}
                {% if next_page %}
                <li class="page-item">
                    <form method="POST" action="{% url 'support:edit_addresses' %}">
                    {% csrf_token %}
                        <input type="hidden" value="pagination" name="paging">
                        <input type="hidden" value="{{current_page}}" name="current_page">
                        <input type="hidden" name="search" value="{{search_value}}">
                        <input type="hidden" name="person" value="{{person.id}}">
                        <button type="submit" value="True" name="nextPage" class="page-link" {% if max == current_page %} disabled{% endif %}>
                        &raquo;
                        </button>
                    </form>
                </li>
                {% endif %}
            </ul>

        </div>

    </div>

</main>

{% endblock content %}
